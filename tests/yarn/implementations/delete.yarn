Set up a board
--------------

    IMPLEMENTS GIVEN a toucan board for deleting cards

    cat <<-EOF > "$DATADIR/setup.yaml"
    name: example.board
    schema: org.consonant-project.toucan.schema.0
    info:
        name: Example board
        description: This is an example board
    lanes:
      - name: Backlog
        description: Backlog lane
        views:
          - Default
          - Secondary
        cards:
          - 0
      - name: Doing
        description: Doing lane
        views:
          - Default
          - Secondary
      - name: Review
        description: Review lane
        views:
          - Default
      - name: Done
        description: Done lane
        views:
          - Default
    views:
      - name: Default
        description: Default view
        lanes:
          - Backlog
          - Doing
          - Review
          - Done
      - name: Secondary
        description: Secondary view
        lanes:
          - Backlog
          - Doing
    users:
      - name: Test User
        email: test@test.org
        roles:
          - admin
    reasons:
      - short-name: testing
        name: A test reason for testing
    milestones:
      - short-name: testing
        name: A test milestone for testing
        deadline: 0000000000 +0000
    cards:
      - id: 0
        title: Implement x for foo
        description: >
          Implementation detail of x for the feature named foo.
        creator: Test User
        lane: Backlog
        reason: testing
        milestone: testing
        assignees:
          - Test User
    EOF

    run_toucan_cli <<-EOF
    setup "$DATADIR/setup.yaml" "$DATADIR/board"
    EOF

Run toucan delete
-----------------

    IMPLEMENTS WHEN running "toucan delete card/uuid"

    uuid=$(grep "[[:alnum:]]" "$DATADIR/uuid")
    run_toucan_cli <<-EOF
    delete "$DATADIR/board" card/$uuid
    EOF

Check the card doesn't exist
----------------------------

    IMPLEMENTS THEN the card no longer exists in the store

    run_consonant_store_test <<-EOF
    commit = store.ref('master').head
    klass = store.klass(commit, 'card')
    objects = store.objects(commit, klass)
    assert len(objects) == 0

Check the output content
------------------------

    IMPLEMENTS THEN the output includes "(.+)"

    grep "$MATCH_1" "$DATADIR/stdout"
